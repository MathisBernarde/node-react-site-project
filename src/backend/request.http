### ==============================================================================
### PARTIE 1 : CR√âATION DES COMPTES (SETUP)
### ==============================================================================
### 1. Cr√©er l'ADMIN (Le chef supr√™me)
POST http://localhost:3000/users
Content-Type: application/json

{
    "login": "AdminChef",
    "email": "admin@test.com",
    "password": "adminpass",
    "role": "ADMIN"
}

### 2. Cr√©er un UTILISATEUR STANDARD (L'utilisateur honn√™te)
POST http://localhost:3000/users
Content-Type: application/json

{
    "login": "Utilisateur",
    "email": "user@test.com",
    "password": "userpass",
    "role": "USER"
}

### 3. Cr√©er un DEUXI√àME UTILISATEUR (Le voleur potentiel)
POST http://localhost:3000/users
Content-Type: application/json

{
    "login": "Voleur",
    "email": "voleur@test.com",
    "password": "badpass",
    "role": "USER"
}


### ==============================================================================
### PARTIE 2 : CONNEXION (R√âCUP√âRATION DES TOKENS)
### ==============================================================================

### A. Connexion ADMIN
# üëâ Copiez le token re√ßu et mettez-le dans la variable @adminToken ci-dessous
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "admin@test.com",
    "password": "adminpass"
}

### B. Connexion UTILISATEUR NORMAL
# üëâ Copiez le token re√ßu et mettez-le dans la variable @userToken ci-dessous
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "user@test.com",
    "password": "userpass"
}

### C. Connexion VOLEUR
# üëâ Copiez le token re√ßu et mettez-le dans la variable @voleurToken ci-dessous
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "voleur@test.com",
    "password": "badpass"
}


### ==============================================================================
### ZONE DE VARIABLES (COLLEZ VOS TOKENS ICI)
### ==============================================================================
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJyb2xlIjoiQURNSU4iLCJpYXQiOjE3NjUzOTg3NjAsImV4cCI6MTc2NTQwMjM2MH0.nFvl5fmcNmtHC-LzzrVnkJ4mHttRYCBkuu5SCFlkR1g
@userToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJyb2xlIjoiVVNFUiIsImlhdCI6MTc2NTM5ODc4MSwiZXhwIjoxNzY1NDAyMzgxfQ.gg_aUkrgb4kmGSj0STfwt6z1fBichgmw3mVLQDEAdno
@voleurToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJyb2xlIjoiVVNFUiIsImlhdCI6MTc2NTM5ODc5MywiZXhwIjoxNzY1NDAyMzkzfQ.uX5xt13E9OJVyFKqSwiiYOkHQboeFJN956NnCWXN1eE


### ==============================================================================
### PARTIE 3 : FONCTIONNALIT√âS "SHOPPING LIST" (Utilisateur Normal)
### ==============================================================================

### 1. Cr√©er une liste de courses (En tant qu'utilisateur normal)
POST http://localhost:3000/shopping-lists
Content-Type: application/json
Authorization: Bearer {{userToken}}

{
    "title": "Ingr√©dients pour la tartiflette",
    "status": "OPEN"
}

### 2. Voir MES listes (Doit afficher la liste "Pizza")
GET http://localhost:3000/shopping-lists
Authorization: Bearer {{userToken}}

### 3. Modifier la liste (Changer titre ou statut)
# ‚ö†Ô∏è Remplacez '1' par l'ID r√©el de la liste si besoin
PATCH http://localhost:3000/shopping-lists/1
Content-Type: application/json
Authorization: Bearer {{userToken}}

{
    "status": "COMPLETED",
    "title": "Pizza Party (Fini)"
}

### 4. Supprimer la liste
DELETE http://localhost:3000/shopping-lists/1
Authorization: Bearer {{userToken}}


### ==============================================================================
### PARTIE 4 : TESTS DE S√âCURIT√â (LE CRASH TEST)
### ==============================================================================

### 1. Le Voleur essaie de voir les listes de l'Utilisateur Normal
# üëâ Attendu : 200 OK mais un tableau VIDE [] (Il ne doit pas voir "Pizza")
GET http://localhost:3000/shopping-lists
Authorization: Bearer {{voleurToken}}

### 2. Le Voleur essaie de modifier la liste n¬∞1 (qui ne lui appartient pas)
# üëâ Attendu : 403 Forbidden ou 404 Not Found
PATCH http://localhost:3000/shopping-lists/5
Content-Type: application/json
Authorization: Bearer {{voleurToken}}

{
    "title": "J'ai pirat√© ta liste"
}


### ==============================================================================
### PARTIE 5 : ADMINISTRATION (ADMIN SEULEMENT)
### ==============================================================================

### 1. Voir TOUS les utilisateurs inscrits
GET http://localhost:3000/users
Authorization: Bearer {{adminToken}}

### 2. Voir TOUTES les listes de courses de TOUT LE MONDE
# L'admin doit pouvoir voir la liste de "UtilisateurNormal" m√™me si ce n'est pas la sienne
GET http://localhost:3000/shopping-lists
Authorization: Bearer {{adminToken}}